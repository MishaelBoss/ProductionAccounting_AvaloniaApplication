<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:ProductionAccounting_AvaloniaApplication.ViewModels.Control"
             x:DataType="vm:SalaryRecordUserControlViewModel"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="ProductionAccounting_AvaloniaApplication.Views.Control.SalaryRecordUserControl">

    <Border x:Name="MainBorder"
            Background="#FFFFFF"
            BorderBrush="#E0E0E0"
            BorderThickness="1"
            CornerRadius="8"
            Margin="0,0,0,10"
            Padding="16">

        <StackPanel Spacing="10">

            <DockPanel>
                <TextBlock Text="{Binding EmployeeName}"
                           FontSize="16"
                           FontWeight="SemiBold"
                           Foreground="#333333"
                           DockPanel.Dock="Left"
                           VerticalAlignment="Center"/>

                <Border CornerRadius="6"
                        Padding="8,3"
                        Background="#E8F5E9"
                        IsVisible="{Binding ShowSummary}"
                        DockPanel.Dock="Right">
                    <TextBlock Text="Итого"
                               FontSize="12"
                               Foreground="#2E7D32"
                               FontWeight="Medium"/>
                </Border>

                <Border CornerRadius="6"
                        Padding="8,3"
                        Background="#2196F3"
                        IsVisible="{Binding ShowTotal}"
                        DockPanel.Dock="Right">
                    <TextBlock Text="ОБЩИЙ ИТОГ"
                               FontSize="12"
                               Foreground="White"
                               FontWeight="Bold"/>
                </Border>
            </DockPanel>

            <StackPanel IsVisible="{Binding ShowDetails}"
                        Spacing="8">

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="Операция:" FontSize="12" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding OperationName}" FontSize="13" Foreground="#333333"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="Дата:" FontSize="12" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding ProductionDate, StringFormat='dd.MM.yyyy'}" FontSize="13" Foreground="#333333"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="Кол-во:" FontSize="12" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding Quantity, StringFormat='{}{0:N2} {Binding Unit}'}" FontSize="13" Foreground="#333333"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*" IsVisible="{Binding ShowTonnage}">
                    <TextBlock Grid.Column="0" Text="Тоннаж:" FontSize="12" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding Tonnage, StringFormat='{}{0:N0} кг'}" FontSize="13" Foreground="#333333"/>
                </Grid>

                <Border Background="#F5F5F5"
                        CornerRadius="6"
                        Padding="10"
                        Margin="0,8,0,0">
                    <TextBlock Text="{Binding CalculationFormula}"
                               FontSize="12"
                               Foreground="#424242"
                               TextWrapping="Wrap"/>
                </Border>
            </StackPanel>

            <StackPanel IsVisible="{Binding !ShowDetails}" Spacing="6">

                <Grid ColumnDefinitions="Auto,*" IsVisible="{Binding IsSummary}">
                    <TextBlock Grid.Column="0" Text="Оклад:" FontSize="13" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding BaseSalary, StringFormat='{}{0:N2} ₽'}"
                               FontSize="14"
                               FontWeight="Medium"
                               Foreground="#1976D2"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="Производство:" FontSize="13" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding ProductionAmount, StringFormat='{}{0:N2} ₽'}"
                               FontSize="14"
                               FontWeight="Medium"
                               Foreground="#1976D2"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="Всего начислено:" FontSize="13" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding TotalGross, StringFormat='{}{0:N2} ₽'}"
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="#1976D2"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*">
                    <TextBlock Grid.Column="0" Text="НДФЛ 13%:" FontSize="13" Foreground="#666666" Margin="0,0,10,0"/>
                    <TextBlock Grid.Column="1" Text="{Binding TaxNDFL, StringFormat='{}{0:N2} ₽'}"
                               FontSize="14"
                               Foreground="#E74C3C"/>
                </Grid>

                <Grid ColumnDefinitions="Auto,*" Margin="0,8,0,0">
                    <TextBlock Grid.Column="0" Text="К выдаче:" FontSize="15" Foreground="#333333" FontWeight="Bold"/>
                    <TextBlock Grid.Column="1" Text="{Binding NetSalary, StringFormat='{}{0:N2} ₽'}"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="#2E7D32"
                               HorizontalAlignment="Right"/>
                </Grid>
            </StackPanel>

            <DockPanel IsVisible="{Binding ShowDetails}" Margin="0,10,0,0">
                <TextBlock Text="Сумма:" FontSize="14" Foreground="#666666" DockPanel.Dock="Left"/>
                <TextBlock Text="{Binding Amount, StringFormat='{}{0:N2} ₽'}"
                           FontSize="18"
                           FontWeight="Bold"
                           Foreground="#1976D2"
                           DockPanel.Dock="Right"
                           HorizontalAlignment="Right"/>
            </DockPanel>
        </StackPanel>
    </Border>
</UserControl>